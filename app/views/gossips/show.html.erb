<!DOCTYPE html>
<html>

<head>
  <title>The Gossip Project</title>
</head>

<body>


  <div class="container mt-4">
    <h4>Potin:</h4>

    <div class="row">
      <div class="card border-success mb-3" style="max-width: 18rem;">
        <div class="card-header">
        <%= link_to "Auteur: " + @gossip.user.first_name + " " + @gossip.user.last_name , profile_path(:id => @gossip.user.id)%></p>
        </div>
        <div class="card-body">
          <p class="card-text">Id: <%=  @gossip.id %></p>
          <p class="card-text">Titre: <%=  @gossip.title  %></p>
          <p class="card-text">Contenu: <%=  @gossip.content %></p>

          <%= link_to "Ville de l'auteur: " + @gossip.user.city.name, city_path(:id => @gossip.user.city.id)%></br>
          <% if @gossip.user == current_user %>
          <%= link_to "Editer l'article", edit_gossip_path(:id => @gossip.id)%>
          <td><%= link_to "Destroy", @gossip, method: :delete, data: { confirm: "Are you sure?" } %></td>
          <% end %>
        
          <% if @gossip.user != current_user %>
          <%= button_to 'Like', gossip_likes_path(@gossip), method: :post %>
          <%end%>
          <p class="card-text">Likes: <%=  @gossip.likes.count %></p>
          </br>


        </div>
      </div>
    </div>
  </div>



  <!-- List gossip -->
<h3 class="mt-4 mb-4">Commentaires: <%=  @gossip.comments.count%></h3>
<% @gossip.comments.each do |comment|%>
<div class="row my-3">
  <div class="col-md-12">
    <div class="card p-2">
      <div class="card-body d-flex m-0 p-0">

        <div class="col-md-1 pt-2">
          <div class="ml-auto d-flex">
            Auteur: <%=comment.user.first_name%><br>
            Content: <%=comment.content%>
            <%= link_to "Editer", edit_gossip_comment_path(@gossip.id, comment.id), class: "btn btn-secondary pl-2 mr-2"%>
            <a href="/gossips/<%= @gossip.id %>/comments/<%= comment.id %>" class= "btn btn-danger mr-1" data-confirm ="Etes-vous sÃ»r ?" data-method="DELETE">Supprimer</a>
          </div>
        </div>

      </div>

    </div>
  </div>
</div>
<%end%>


<div class="comment-form">
<%= render 'comments/form' %>
</div>

